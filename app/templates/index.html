<!-- app/templates/index.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Neon Ticker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.0/socket.io.min.js"></script>
    
</head>
<body>
    <div id="loading">Loading...</div>
    
    <div id="connection-status" class="connection-status status-disconnected">
        Disconnected
    </div>
    
    <div id="content" style="display: none; width: 100%;">
        <h1>Real-Time Stock Info</h1>
        
        <div id="error" class="error"></div>
        <div id="info" class="info" style="display: none;"></div>
        
        <div class="container">
            <div class="section add-ticker-section">
                <h2>Add Stock</h2>
                <div class="input-group">
                    <input type="text" id="ticker-input" placeholder="Enter ticker (e.g., AAPL)" maxlength="5">
                    <button onclick="addTicker()">Add</button>
                </div>
                <div class="info">
                    <strong>Tips:</strong><br>
                    • Max 30 stocks in watchlist<br>
                    • Enter valid stock symbols<br>
                    • Real-time quotes via WebSocket<br>
                    • Latest data available 24/7
                </div>
                <div id="market-status" class="market-status">
                    <div id="market-status-text">Checking market status...</div>
                </div>
            </div>
            
            <div class="section watchlist-section">
                <h2>Your Watchlist</h2>
                <div id="stock-grid" class="stock-grid">
                    <div class="empty-state">No stocks in watchlist. Add some tickers to get started!</div>
                </div>
            </div>
            
            <div class="section alpaca-data-section">
                <h2>Watchlist Market Data</h2>
                <div id="alpaca-info" class="info">
                    This section shows the latest available data from Alpaca Markets, including after-hours data when the market is closed.
                </div>
                <table id="alpaca-table" class="alpaca-table" style="display: none;">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Bid</th>
                            <th>Ask</th>
                            <th>Last Trade</th>
                            <th>Trade Size</th>
                            <th>Last Update</th>
                        </tr>
                    </thead>
                    <tbody id="alpaca-tbody">
                    </tbody>
                </table>
                <div id="alpaca-empty" class="empty-state">Add stocks to your watchlist to see detailed market data.</div>
            </div>
        </div>
    
        <div class="section market-data-section">
            <section id="all-stocks-section">
                <h2>All Tradable Stocks</h2>
                <table id="stocksTable" class="display" style="width:100%">
                    <thead>
                        <tr>
                            <th>Symbol</th>
                            <th>Name</th>
                            <th>Exchange</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data loaded via AJAX -->
                    </tbody>
                </table>
                <button onclick="window.location.href='/all_stocks'">View Full Page List</button>
            </section>
        </div>
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
